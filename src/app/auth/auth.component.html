<ng-template appPlaceholder></ng-template>
<div fxLayout="row" fxFlex="100" fxLayoutAlign="center center">
  <div *ngIf="isLoading$ | async">
    <!-- TODO: replace with mat-spinner -->
    <app-loading-spinner></app-loading-spinner>
  </div>
  <form
    fxLayout="column"
    fxLayoutAlign="center center"
    fxFlex.lt-md="80"
    fxFlex.md="40"
    fxFlex.lg="30"
    fxFlex.gt-lg="20"
    #authForm="ngForm"
    (ngSubmit)="onSubmit(authForm)"
    *ngIf="(isLoading$ | async) === false"
  >
    <mat-form-field fxFlexFill>
      <mat-label for="email">Email</mat-label>
      <input
        matInput
        type="email"
        id="email"
        ngModel
        name="email"
        required
        email
      />
    </mat-form-field>
    <mat-form-field fxFlexFill>
      <mat-label for="password">Password</mat-label>
      <input
        matInput
        type="password"
        id="password"
        ngModel
        name="password"
        required
        minlength="6"
      />
    </mat-form-field>
    <div fxLayout="column" fxLayoutAlign="center center" fxFlexFill>
      <button
        fxFlexFill
        mat-raised-button
        color="primary"
        type="submit"
        [disabled]="!authForm.valid"
      >
        {{ isLoginMode ? "Login" : "Sign up" }}
      </button>
      <br />
      <button
        fxFlexFill
        mat-stroked-button
        color="accent"
        type="button"
        (click)="onSwitchMode()"
      >
        {{ isLoginMode ? "Switch to Sign up" : "Switch to Login" }}
      </button>
    </div>
  </form>
</div>
